<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DISC Paradigmâ„¢ Assessment</title>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@600;700;800;900&family=Barlow:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{--navy:#0D2340;--blue:#1A5A8A;--gold:#F5A623;--orange:#E85D1A;--dark:#080E18;--mid:#0F1C2E;--white:#F4F1EC;--off:#C8C4BB;--border:rgba(255,255,255,.09);}
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
    html{scroll-behavior:smooth;}
    body{font-family:'Barlow',sans-serif;background:var(--dark);color:var(--white);min-height:100vh;overflow-x:hidden;}
    .bg-mesh{position:fixed;inset:0;z-index:0;pointer-events:none;background:radial-gradient(ellipse 70% 50% at 80% 20%,rgba(26,90,138,.18) 0%,transparent 70%),radial-gradient(ellipse 50% 40% at 10% 80%,rgba(232,93,26,.1) 0%,transparent 60%),var(--dark);}
    .bg-grid{position:fixed;inset:0;z-index:0;pointer-events:none;background-image:linear-gradient(rgba(245,166,35,.03) 1px,transparent 1px),linear-gradient(90deg,rgba(245,166,35,.03) 1px,transparent 1px);background-size:50px 50px;}
    .app{position:relative;z-index:1;min-height:100vh;display:flex;flex-direction:column;align-items:center;padding:2rem 1rem 4rem;}
    .logo-bar{display:flex;align-items:center;gap:.75rem;margin-bottom:2rem;padding-top:.5rem;}
    .logo-bar .brand{font-family:'Barlow Condensed',sans-serif;font-size:1.4rem;font-weight:800;text-transform:uppercase;letter-spacing:.06em;color:var(--gold);}
    .logo-bar .brand span{color:var(--white);}
    .card{background:rgba(15,28,46,.85);border:1px solid var(--border);border-radius:8px;width:100%;max-width:700px;padding:2.5rem;backdrop-filter:blur(12px);}
    .screen{display:none;}.screen.active{display:block;}
    .progress-wrap{margin-bottom:2rem;}
    .progress-meta{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;}
    .progress-label{font-family:'Barlow Condensed',sans-serif;font-size:.75rem;letter-spacing:.15em;text-transform:uppercase;color:var(--gold);}
    .progress-count{font-size:.8rem;color:rgba(244,241,236,.4);}
    .progress-bar{height:3px;background:rgba(255,255,255,.08);border-radius:2px;overflow:hidden;}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--blue),var(--gold));border-radius:2px;transition:width .4s ease;}
    h1{font-family:'Barlow Condensed',sans-serif;font-size:clamp(1.8rem,5vw,2.8rem);font-weight:900;text-transform:uppercase;line-height:1;letter-spacing:-.01em;margin-bottom:1rem;}
    h1 em{font-style:normal;color:var(--gold);}
    h2{font-family:'Barlow Condensed',sans-serif;font-size:1.4rem;font-weight:800;text-transform:uppercase;letter-spacing:.04em;margin-bottom:1rem;}
    .sub{font-size:.95rem;font-weight:300;color:var(--off);line-height:1.65;margin-bottom:1.5rem;}
    .field{margin-bottom:1.25rem;}
    .field label{display:block;font-family:'Barlow Condensed',sans-serif;font-size:.8rem;font-weight:700;letter-spacing:.12em;text-transform:uppercase;color:var(--gold);margin-bottom:.4rem;}
    .field input{width:100%;background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:4px;padding:.75rem 1rem;font-family:'Barlow',sans-serif;font-size:.95rem;color:var(--white);outline:none;transition:border-color .2s;}
    .field input:focus{border-color:rgba(245,166,35,.5);}
    .field input::placeholder{color:rgba(244,241,236,.3);}
    .btn{font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:.95rem;letter-spacing:.1em;text-transform:uppercase;padding:.8rem 1.75rem;border-radius:4px;border:none;cursor:pointer;transition:all .2s;text-decoration:none;display:inline-block;text-align:center;}
    .btn-primary{background:var(--orange);color:#fff;box-shadow:0 4px 20px rgba(232,93,26,.35);}
    .btn-primary:hover{box-shadow:0 6px 28px rgba(232,93,26,.55);transform:translateY(-1px);}
    .btn-primary:disabled{opacity:.4;cursor:not-allowed;transform:none;}
    .btn-ghost{background:transparent;color:rgba(244,241,236,.5);border:1px solid var(--border);}
    .btn-ghost:hover{color:var(--white);border-color:rgba(255,255,255,.2);}
    .btn-gold{background:var(--gold);color:var(--dark);box-shadow:0 4px 20px rgba(245,166,35,.3);}
    .btn-gold:hover{box-shadow:0 6px 28px rgba(245,166,35,.5);transform:translateY(-1px);}
    .btn-block{width:100%;display:block;}
    .btn-row{display:flex;gap:.75rem;margin-top:1.75rem;justify-content:space-between;align-items:center;}
    .track-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.5rem 0;}
    .track-card{border:2px solid var(--border);border-radius:6px;padding:1.5rem;cursor:pointer;transition:all .25s;text-align:center;}
    .track-card:hover{border-color:rgba(245,166,35,.4);background:rgba(245,166,35,.04);}
    .track-card.selected{border-color:var(--gold);background:rgba(245,166,35,.08);}
    .track-icon{font-size:2rem;margin-bottom:.5rem;display:block;}
    .track-name{font-family:'Barlow Condensed',sans-serif;font-size:1.1rem;font-weight:800;text-transform:uppercase;letter-spacing:.06em;margin-bottom:.3rem;}
    .track-desc{font-size:.8rem;color:rgba(244,241,236,.45);font-weight:300;}
    .code-input{font-family:'Barlow Condensed',sans-serif!important;font-size:1.5rem!important;letter-spacing:.3em!important;text-transform:uppercase!important;text-align:center!important;padding:1rem!important;}
    .code-status{margin-top:.5rem;font-size:.8rem;min-height:1.2rem;}
    .code-status.valid{color:#4ade80;}.code-status.invalid{color:var(--orange);}.code-status.checking{color:var(--gold);}
    .q-domain{font-family:'Barlow Condensed',sans-serif;font-size:.7rem;font-weight:700;letter-spacing:.18em;text-transform:uppercase;margin-bottom:.75rem;opacity:.5;}
    .q-text{font-size:1.05rem;font-weight:400;line-height:1.6;color:var(--white);margin-bottom:1.75rem;}
    .likert{display:flex;flex-direction:column;gap:.6rem;}
    .likert-option{display:flex;align-items:center;gap:.9rem;padding:.85rem 1.1rem;border:1px solid var(--border);border-radius:5px;cursor:pointer;transition:all .2s;}
    .likert-option:hover{border-color:rgba(245,166,35,.35);background:rgba(245,166,35,.04);}
    .likert-option.selected{border-color:var(--gold);background:rgba(245,166,35,.1);}
    .likert-num{width:28px;height:28px;flex-shrink:0;border-radius:50%;border:1px solid rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;font-family:'Barlow Condensed',sans-serif;font-weight:700;font-size:.9rem;color:rgba(244,241,236,.5);transition:all .2s;}
    .likert-option.selected .likert-num{background:var(--gold);border-color:var(--gold);color:var(--dark);}
    .likert-label{font-size:.9rem;color:var(--off);font-weight:300;}
    .likert-option.selected .likert-label{color:var(--white);font-weight:400;}
    .primary-badge{display:inline-flex;align-items:center;gap:.5rem;background:rgba(245,166,35,.1);border:1px solid rgba(245,166,35,.3);border-radius:4px;padding:.5rem 1.25rem;font-family:'Barlow Condensed',sans-serif;font-size:.75rem;font-weight:700;letter-spacing:.15em;text-transform:uppercase;color:var(--gold);margin-bottom:1rem;}
    .style-cards{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.5rem 0;}
    .style-card{padding:1.25rem;border-radius:6px;border:1px solid;}
    .style-card.primary{border-color:rgba(245,166,35,.4);background:rgba(245,166,35,.07);}
    .style-card.secondary{border-color:var(--border);background:rgba(255,255,255,.03);}
    .style-card-label{font-family:'Barlow Condensed',sans-serif;font-size:.7rem;font-weight:700;letter-spacing:.15em;text-transform:uppercase;margin-bottom:.4rem;}
    .style-card.primary .style-card-label{color:var(--gold);}
    .style-card.secondary .style-card-label{color:rgba(244,241,236,.4);}
    .style-card-name{font-family:'Barlow Condensed',sans-serif;font-size:1.5rem;font-weight:900;text-transform:uppercase;letter-spacing:.04em;margin-bottom:.25rem;}
    .style-card-score{font-size:.85rem;color:rgba(244,241,236,.55);}
    .chart-wrap{position:relative;margin:1.5rem 0;height:260px;}
    .breakdown{margin-top:1.5rem;}
    .breakdown-row{display:flex;align-items:center;gap:1rem;margin-bottom:.9rem;}
    .breakdown-label{font-family:'Barlow Condensed',sans-serif;font-size:.85rem;font-weight:700;text-transform:uppercase;width:90px;flex-shrink:0;}
    .breakdown-bar-wrap{flex:1;height:8px;background:rgba(255,255,255,.07);border-radius:4px;overflow:hidden;}
    .breakdown-bar{height:100%;border-radius:4px;transition:width 1s ease;}
    .breakdown-pct{font-size:.8rem;color:rgba(244,241,236,.5);width:38px;text-align:right;flex-shrink:0;}
    .locked-wrap{position:relative;margin:1.5rem 0;}
    .locked-blur{filter:blur(6px);pointer-events:none;user-select:none;opacity:.6;}
    .lock-overlay{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(8,14,24,.5);border-radius:6px;backdrop-filter:blur(2px);}
    .lock-icon{font-size:2.5rem;margin-bottom:.5rem;}
    .lock-msg{font-family:'Barlow Condensed',sans-serif;font-size:1rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;color:var(--gold);text-align:center;}
    .lock-sub{font-size:.8rem;color:rgba(244,241,236,.5);margin-top:.25rem;text-align:center;}
    .pricing-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin:1.25rem 0;}
    .pricing-card{border:1px solid var(--border);border-radius:6px;padding:1.25rem;text-align:center;transition:border-color .2s;}
    .pricing-card:hover{border-color:rgba(245,166,35,.3);}
    .pricing-card.featured{border-color:rgba(245,166,35,.4);background:rgba(245,166,35,.05);}
    .pricing-card .price{font-family:'Barlow Condensed',sans-serif;font-size:2rem;font-weight:900;color:var(--gold);line-height:1;}
    .pricing-card .price-sub{font-size:.75rem;color:rgba(244,241,236,.4);margin:.25rem 0 .75rem;}
    .pricing-card .price-name{font-family:'Barlow Condensed',sans-serif;font-size:.85rem;font-weight:700;text-transform:uppercase;letter-spacing:.08em;margin-bottom:.5rem;}
    .pricing-card .price-desc{font-size:.78rem;color:rgba(244,241,236,.45);font-weight:300;margin-bottom:1rem;line-height:1.5;}
    .consult-box{background:rgba(26,90,138,.1);border:1px solid rgba(26,90,138,.3);border-radius:6px;padding:1.25rem 1.5rem;margin-top:1rem;text-align:center;}
    .consult-box h3{font-family:'Barlow Condensed',sans-serif;font-size:1rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;margin-bottom:.4rem;}
    .consult-box p{font-size:.85rem;color:rgba(244,241,236,.5);margin-bottom:.9rem;}
    .profile-box{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:6px;padding:1.25rem 1.5rem;margin-top:1.25rem;}
    .profile-box h3{font-family:'Barlow Condensed',sans-serif;font-size:.8rem;font-weight:700;letter-spacing:.15em;text-transform:uppercase;color:var(--gold);margin-bottom:.6rem;}
    .profile-box p{font-size:.88rem;color:var(--off);line-height:1.65;font-weight:300;}
    .email-box{background:rgba(245,166,35,.05);border:1px solid rgba(245,166,35,.2);border-radius:6px;padding:1.5rem;margin-top:1.5rem;}
    .email-box h3{font-family:'Barlow Condensed',sans-serif;font-size:1rem;font-weight:700;text-transform:uppercase;letter-spacing:.06em;margin-bottom:.4rem;}
    .email-box p{font-size:.85rem;color:rgba(244,241,236,.55);margin-bottom:1rem;}
    .email-row{display:flex;gap:.75rem;}
    .email-row input{flex:1;background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:4px;padding:.7rem 1rem;font-family:'Barlow',sans-serif;font-size:.9rem;color:var(--white);outline:none;}
    .email-sent{color:#4ade80;font-size:.85rem;margin-top:.5rem;display:none;}
    .verify-icon{font-size:3rem;text-align:center;display:block;margin-bottom:1rem;}
    .otp-row{display:flex;gap:.5rem;justify-content:center;margin:1.5rem 0;}
    .otp-digit{width:48px;height:56px;text-align:center;font-family:'Barlow Condensed',sans-serif;font-size:1.5rem;font-weight:700;background:rgba(255,255,255,.05);border:1px solid var(--border);border-radius:4px;color:var(--white);outline:none;transition:border-color .2s;}
    .otp-digit:focus{border-color:var(--gold);}
    .resend-link{font-size:.82rem;color:rgba(244,241,236,.4);text-align:center;cursor:pointer;transition:color .2s;}
    .resend-link:hover{color:var(--gold);}
    .alert{padding:.75rem 1rem;border-radius:4px;font-size:.85rem;margin-bottom:1rem;display:none;}
    .alert.error{background:rgba(232,93,26,.1);border:1px solid rgba(232,93,26,.3);color:#FCA98A;}
    .alert.show{display:block;}
    .preview-tag{display:inline-flex;align-items:center;gap:.4rem;background:rgba(245,166,35,.1);border:1px solid rgba(245,166,35,.25);border-radius:100px;padding:.3rem .9rem;font-family:'Barlow Condensed',sans-serif;font-size:.72rem;font-weight:700;letter-spacing:.15em;text-transform:uppercase;color:var(--gold);margin-bottom:1rem;}
    .style-pills{display:flex;gap:.5rem;justify-content:center;flex-wrap:wrap;margin:1rem 0;}
    .style-pill{padding:.35rem .9rem;border-radius:100px;font-family:'Barlow Condensed',sans-serif;font-size:.75rem;font-weight:700;letter-spacing:.06em;text-transform:uppercase;}
    .have-code{text-align:center;margin-top:1.25rem;}
    .have-code a{font-size:.85rem;color:rgba(244,241,236,.4);cursor:pointer;text-decoration:underline;transition:color .2s;}
    .have-code a:hover{color:var(--gold);}
    hr{border:none;border-top:1px solid var(--border);margin:1.5rem 0;}
    .spinner{display:inline-block;width:18px;height:18px;border:2px solid rgba(244,241,236,.2);border-top-color:var(--gold);border-radius:50%;animation:spin .7s linear infinite;vertical-align:middle;margin-right:.4rem;}
    @keyframes spin{to{transform:rotate(360deg);}}
    @media(max-width:520px){.card{padding:1.5rem;}.style-cards,.pricing-grid,.track-grid{grid-template-columns:1fr;}.email-row{flex-direction:column;}.otp-digit{width:40px;height:48px;font-size:1.2rem;}}
  </style>
</head>
<body>
<div class="bg-mesh"></div>
<div class="bg-grid"></div>
<div class="app">
  <div class="logo-bar"><div class="brand">DISC <span>Paradigm&trade;</span></div></div>

  <!-- LANDING / PREVIEW START -->
  <div class="card screen active" id="screen-landing">
    <div style="text-align:center;margin-bottom:1.5rem;">
      <div class="preview-tag">&#10022; Free Preview Assessment</div>
      <h1>Discover Your <em>Leadership</em> Style</h1>
      <p class="sub">Take a 10-question preview and get a glimpse of your behavioral profile. Unlock the full 40-question report to see your complete results, secondary style, and 30-Day Action Plan.</p>
      <div class="style-pills">
        <span class="style-pill" style="background:rgba(26,90,138,.2);color:#5B9BD5;border:1px solid rgba(26,90,138,.3);">Command</span>
        <span class="style-pill" style="background:rgba(245,166,35,.15);color:#F5A623;border:1px solid rgba(245,166,35,.3);">Cohesion</span>
        <span class="style-pill" style="background:rgba(46,139,87,.15);color:#4ade80;border:1px solid rgba(46,139,87,.3);">Stability</span>
        <span class="style-pill" style="background:rgba(232,93,26,.15);color:#E85D1A;border:1px solid rgba(232,93,26,.3);">Precision</span>
      </div>
    </div>
    <div class="track-grid">
      <div class="track-card" id="track-mil" onclick="selectTrack('military')">
        <span class="track-icon">&#127894;</span>
        <div class="track-name">Military</div>
        <div class="track-desc">Active duty, reserves, veterans, government agencies</div>
      </div>
      <div class="track-card" id="track-corp" onclick="selectTrack('corporate')">
        <span class="track-icon">&#127970;</span>
        <div class="track-name">Corporate</div>
        <div class="track-desc">Private sector, nonprofits, healthcare, education</div>
      </div>
    </div>
    <button class="btn btn-primary btn-block" id="start-preview-btn" onclick="startPreview()" disabled>Start Free Preview &rarr;</button>
    <div class="have-code"><a onclick="goTo('screen-code')">I have an access code for the full assessment</a></div>
  </div>

  <!-- FULL ASSESSMENT: CODE -->
  <div class="card screen" id="screen-code">
    <h1>Enter Your <em>Access Code</em></h1>
    <p class="sub">Your organization administrator provided you with a unique access code. Enter it below to begin the full 40-question assessment.</p>
    <div class="alert error" id="code-error"></div>
    <div class="field">
      <label>Access Code</label>
      <input type="text" class="code-input" id="code-input" placeholder="XXXXXXXX" maxlength="10" autocomplete="off" oninput="validateCode(this)"/>
      <div class="code-status" id="code-status"></div>
    </div>
    <div class="btn-row">
      <button class="btn btn-ghost" onclick="goTo('screen-landing')">&larr; Back</button>
      <button class="btn btn-primary" id="code-next-btn" onclick="submitCode()" disabled>Continue &rarr;</button>
    </div>
  </div>

  <!-- PROFILE -->
  <div class="card screen" id="screen-profile">
    <h1>Tell Us <em>About You</em></h1>
    <p class="sub">This information personalizes your results report and is kept confidential within your organization.</p>
    <div class="alert error" id="profile-error"></div>
    <div class="field"><label>Full Name</label><input type="text" id="p-name" placeholder="First and Last Name"/></div>
    <div class="field"><label>Email Address</label><input type="email" id="p-email" placeholder="your@email.com"/></div>
    <div class="field"><label>Organization / Unit</label><input type="text" id="p-org" placeholder="Organization or Unit Name"/></div>
    <div class="field"><label>Role / Rank</label><input type="text" id="p-role" placeholder="Your Role or Rank"/></div>
    <div class="btn-row">
      <button class="btn btn-ghost" onclick="goTo('screen-code')">&larr; Back</button>
      <button class="btn btn-primary" onclick="submitProfile()">Send Verification &rarr;</button>
    </div>
  </div>

  <!-- VERIFY EMAIL -->
  <div class="card screen" id="screen-verify">
    <span class="verify-icon">&#128236;</span>
    <h2 style="text-align:center;">Check Your Email</h2>
    <p class="sub" style="text-align:center;">We sent a 6-digit code to <strong id="verify-email-display"></strong>.</p>
    <div class="alert error" id="verify-error"></div>
    <div class="otp-row">
      <input class="otp-digit" maxlength="1" type="text" inputmode="numeric" oninput="otpInput(this,0)" onkeydown="otpBack(event,this,0)"/>
      <input class="otp-digit" maxlength="1" type="text" inputmode="numeric" oninput="otpInput(this,1)" onkeydown="otpBack(event,this,1)"/>
      <input class="otp-digit" maxlength="1" type="text" inputmode="numeric" oninput="otpInput(this,2)" onkeydown="otpBack(event,this,2)"/>
      <input class="otp-digit" maxlength="1" type="text" inputmode="numeric" oninput="otpInput(this,3)" onkeydown="otpBack(event,this,3)"/>
      <input class="otp-digit" maxlength="1" type="text" inputmode="numeric" oninput="otpInput(this,4)" onkeydown="otpBack(event,this,4)"/>
      <input class="otp-digit" maxlength="1" type="text" inputmode="numeric" oninput="otpInput(this,5)" onkeydown="otpBack(event,this,5)"/>
    </div>
    <p class="resend-link" onclick="resendOtp()">Did not receive it? Resend the code</p>
    <div class="btn-row" style="margin-top:1.5rem;">
      <button class="btn btn-ghost" onclick="goTo('screen-profile')">&larr; Back</button>
      <button class="btn btn-primary" onclick="submitOtp()">Verify &amp; Begin &rarr;</button>
    </div>
  </div>

  <!-- QUESTION -->
  <div class="card screen" id="screen-question">
    <div class="progress-wrap">
      <div class="progress-meta">
        <span class="progress-label" id="q-mode-label">Free Preview</span>
        <span class="progress-count" id="q-count">Question 1 of 10</span>
      </div>
      <div class="progress-bar"><div class="progress-fill" id="q-progress" style="width:10%"></div></div>
    </div>
    <div class="q-domain" id="q-domain"></div>
    <div class="q-text" id="q-text"></div>
    <div class="likert">
      <div class="likert-option" onclick="selectAnswer(1)"><div class="likert-num">1</div><div class="likert-label">Strongly Disagree</div></div>
      <div class="likert-option" onclick="selectAnswer(2)"><div class="likert-num">2</div><div class="likert-label">Disagree</div></div>
      <div class="likert-option" onclick="selectAnswer(3)"><div class="likert-num">3</div><div class="likert-label">Agree</div></div>
      <div class="likert-option" onclick="selectAnswer(4)"><div class="likert-num">4</div><div class="likert-label">Strongly Agree</div></div>
    </div>
    <div class="btn-row">
      <button class="btn btn-ghost" id="q-back-btn" onclick="prevQuestion()">&larr; Previous</button>
      <button class="btn btn-primary" id="q-next-btn" onclick="nextQuestion()" disabled>Next &rarr;</button>
    </div>
  </div>

  <!-- PREVIEW RESULTS -->
  <div class="card screen" id="screen-preview-results">
    <div style="text-align:center;margin-bottom:1.5rem;">
      <div class="primary-badge">&#10022; Your Preview Results</div>
      <h1>Your <em>Primary</em> Style</h1>
      <p class="sub">Based on your 10-question preview. Unlock the full report to see your complete profile, secondary style, and action plan.</p>
    </div>
    <div class="style-card primary" style="margin-bottom:1rem;">
      <div class="style-card-label">Your Primary Style (Preview)</div>
      <div class="style-card-name" id="preview-primary-name">---</div>
      <div class="style-card-score" id="preview-primary-score"></div>
    </div>
    <div class="profile-box" id="preview-profile-text"></div>
    <div class="locked-wrap">
      <div class="locked-blur">
        <div class="style-cards">
          <div class="style-card secondary"><div class="style-card-label">Secondary Style</div><div class="style-card-name">XXXXXXXX</div><div class="style-card-score">XX%</div></div>
          <div class="style-card secondary"><div class="style-card-label">Full Score</div><div class="style-card-name">XXXXXXXX</div><div class="style-card-score">XX%</div></div>
        </div>
        <div class="breakdown" style="margin-top:1rem;">
          <div class="breakdown-row"><div class="breakdown-label" style="color:#1A5A8A">Command</div><div class="breakdown-bar-wrap"><div class="breakdown-bar" style="width:70%;background:#1A5A8A"></div></div><div class="breakdown-pct">XX%</div></div>
          <div class="breakdown-row"><div class="breakdown-label" style="color:#F5A623">Cohesion</div><div class="breakdown-bar-wrap"><div class="breakdown-bar" style="width:55%;background:#F5A623"></div></div><div class="breakdown-pct">XX%</div></div>
          <div class="breakdown-row"><div class="breakdown-label" style="color:#2E8B57">Stability</div><div class="breakdown-bar-wrap"><div class="breakdown-bar" style="width:45%;background:#2E8B57"></div></div><div class="breakdown-pct">XX%</div></div>
          <div class="breakdown-row"><div class="breakdown-label" style="color:#E85D1A">Precision</div><div class="breakdown-bar-wrap"><div class="breakdown-bar" style="width:60%;background:#E85D1A"></div></div><div class="breakdown-pct">XX%</div></div>
        </div>
      </div>
      <div class="lock-overlay">
        <div class="lock-icon">&#128274;</div>
        <div class="lock-msg">Full Report Locked</div>
        <div class="lock-sub">Unlock your complete profile, secondary style,<br/>score breakdown &amp; 30-Day Action Plan</div>
      </div>
    </div>
    <hr/>
    <h2 style="text-align:center;margin-bottom:.5rem;">Unlock Your <em>Full</em> Report</h2>
    <p style="text-align:center;font-size:.88rem;color:rgba(244,241,236,.5);margin-bottom:1.25rem;">Choose the option that fits your needs</p>
    <div class="pricing-grid">
      <div class="pricing-card featured">
        <div class="price-name">Individual</div>
        <div class="price">$25</div>
        <div class="price-sub">one-time &middot; instant access</div>
        <div class="price-desc">Full 40-question assessment + complete profile report + 30-Day Action Plan</div>
        <a href="https://buy.stripe.com/REPLACE_WITH_YOUR_INDIVIDUAL_STRIPE_LINK" target="_blank" class="btn btn-gold btn-block">Purchase Now &rarr;</a>
      </div>
      <div class="pricing-card">
        <div class="price-name">Organization</div>
        <div class="price">$400</div>
        <div class="price-sub">20 assessments &middot; bulk access</div>
        <div class="price-desc">Access codes for your entire team + admin dashboard + group analytics</div>
        <a href="https://buy.stripe.com/REPLACE_WITH_YOUR_ORG_STRIPE_LINK" target="_blank" class="btn btn-primary btn-block">Purchase Now &rarr;</a>
      </div>
    </div>
    <div class="consult-box">
      <h3>&#127919; Not Sure Which Option Is Right for You?</h3>
      <p>Book a free 30-minute strategy session with Kisha White, SPHR. We will discuss your team needs and find the right solution.</p>
      <a href="https://meetings-na2.hubspot.com/kswhite" target="_blank" class="btn btn-ghost">Book Free Consultation &rarr;</a>
    </div>
    <div style="text-align:center;margin-top:1.5rem;">
      <p style="font-size:.8rem;color:rgba(244,241,236,.3);">After purchase you will receive an access code by email within minutes.</p>
      <button class="btn btn-ghost" style="margin-top:.75rem;font-size:.78rem;" onclick="location.reload()">&larr; Retake Preview</button>
    </div>
  </div>

  <!-- FULL RESULTS -->
  <div class="card screen" id="screen-results">
    <div style="text-align:center;margin-bottom:1.5rem;">
      <div class="primary-badge">&#10022; Your DISC Paradigm&trade; Full Results</div>
      <h1>Your <em>Performance</em> Profile</h1>
      <p class="sub" id="results-name-line"></p>
    </div>
    <div class="style-cards">
      <div class="style-card primary"><div class="style-card-label">Primary Style</div><div class="style-card-name" id="primary-name">---</div><div class="style-card-score" id="primary-score"></div></div>
      <div class="style-card secondary"><div class="style-card-label">Secondary Style</div><div class="style-card-name" id="secondary-name">---</div><div class="style-card-score" id="secondary-score"></div></div>
    </div>
    <div class="chart-wrap"><canvas id="results-chart"></canvas></div>
    <div class="breakdown" id="score-breakdown"></div>
    <div class="profile-box" id="primary-profile"></div>
    <div class="profile-box" id="secondary-profile" style="margin-top:.75rem;"></div>
    <div class="profile-box" id="blend-profile" style="margin-top:.75rem;display:none;"></div>
    <hr/>
    <div class="email-box">
      <h3>&#128231; Get Your Full Report by Email</h3>
      <p>Receive a detailed report with communication tips, stress triggers, and your 30-Day Action Plan.</p>
      <div class="email-row">
        <input type="email" id="report-email" placeholder="Confirm your email address"/>
        <button class="btn btn-gold" onclick="sendReport()">Send Report</button>
      </div>
      <div class="email-sent" id="email-sent">&#10003; Report sent! Check your inbox.</div>
    </div>
    <div class="btn-row" style="margin-top:1.5rem;justify-content:center;">
      <button class="btn btn-ghost" onclick="window.print()">Print Results</button>
      <button class="btn btn-ghost" onclick="location.reload()">Take Again</button>
    </div>
  </div>
</div>

<script>
const WORKER_URL='https://disc-paradigm-worker.kishawhite6.workers.dev';

let state={mode:'preview',code:'',orgId:'',orgName:'',name:'',email:'',org:'',role:'',track:'',questions:[],answers:{},currentQ:0,scores:{D:0,I:0,S:0,C:0},verified:false,otpToken:''};

const ALL_Q=[
  {id:1,style:'D',type:'B',mil:"I take charge and make rapid decisions when my unit faces an unexpected obstacle.",corp:"I take charge and make rapid decisions when my team faces an unexpected obstacle."},
  {id:2,style:'D',type:'S',mil:"When a mission is falling behind schedule, I push through inefficiencies and drive results rather than waiting for guidance.",corp:"When a project falls behind schedule, I push through inefficiencies and drive results rather than waiting for direction."},
  {id:3,style:'D',type:'B',mil:"I prefer to be given the objective and trusted to determine the best course of action independently.",corp:"I prefer to be given the goal and trusted to determine the best approach independently."},
  {id:4,style:'D',type:'S',mil:"In a high-pressure operation, I am the one others look to for direction and decisive action.",corp:"In a high-pressure situation, I am the one others look to for direction and decisive action."},
  {id:5,style:'D',type:'B',mil:"I would rather make an imperfect decision quickly than wait for a perfect solution that takes too long.",corp:"I would rather make an imperfect decision quickly than wait for a perfect solution that takes too long."},
  {id:6,style:'D',type:'S',mil:"When I see a gap in leadership on a mission, I naturally step in to fill it without being asked.",corp:"When I see a gap in leadership on a project, I naturally step in to fill it without being asked."},
  {id:7,style:'D',type:'B',mil:"I am comfortable challenging the status quo when I believe a different approach will produce better results.",corp:"I am comfortable challenging the status quo when I believe a different approach will produce better results."},
  {id:8,style:'D',type:'S',mil:"During an After Action Review, I focus primarily on what went wrong and how to fix it for the next mission.",corp:"During a project debrief, I focus primarily on what went wrong and how to fix it next time."},
  {id:9,style:'D',type:'B',mil:"I find long planning processes frustrating when the path forward seems obvious to me.",corp:"I find lengthy planning meetings frustrating when the path forward seems obvious to me."},
  {id:10,style:'D',type:'S',mil:"When my unit is in conflict, I step in with a direct conversation rather than letting it resolve on its own.",corp:"When my team is in conflict, I address it directly rather than waiting for it to resolve on its own."},
  {id:11,style:'I',type:'B',mil:"I naturally energize the people around me, especially during long or difficult operations.",corp:"I naturally energize the people around me, especially during challenging or extended projects."},
  {id:12,style:'I',type:'S',mil:"When morale in the unit is low, I am usually the one who lifts the team's spirit.",corp:"When morale on the team is low, I am usually the one who lifts the team's spirit."},
  {id:13,style:'I',type:'B',mil:"I find it easy to connect with new Soldiers and make them feel welcomed into the unit quickly.",corp:"I find it easy to connect with new colleagues and make them feel welcomed quickly."},
  {id:14,style:'I',type:'S',mil:"I am most effective when I can communicate the reason behind the mission to motivate my team.",corp:"I am most effective when I can communicate the reason behind a project to motivate my team."},
  {id:15,style:'I',type:'B',mil:"I use storytelling and enthusiasm to get my point across more effectively than data alone.",corp:"I use storytelling and enthusiasm to get my point across more effectively than data alone."},
  {id:16,style:'I',type:'S',mil:"During mission planning, I make sure every Soldier feels their voice has been heard before we move out.",corp:"During team planning, I make sure every member feels their voice has been heard before we proceed."},
  {id:17,style:'I',type:'B',mil:"I am known for building strong relationships across different units and organizations.",corp:"I am known for building strong relationships across different departments and organizations."},
  {id:18,style:'I',type:'S',mil:"When introducing a change in mission, I spend time selling the idea to the team rather than just issuing the order.",corp:"When introducing a change, I spend time building buy-in rather than just announcing the decision."},
  {id:19,style:'I',type:'B',mil:"I thrive in environments where I can collaborate, inspire, and communicate openly.",corp:"I thrive in environments where I can collaborate, inspire, and communicate openly."},
  {id:20,style:'I',type:'S',mil:"I sometimes prioritize keeping team unity over confronting a performance issue directly.",corp:"I sometimes prioritize keeping team harmony over confronting a performance issue directly."},
  {id:21,style:'S',type:'B',mil:"I am the person in my unit others come to when they need a calm, steady perspective.",corp:"I am the person on my team others come to when they need a calm, steady perspective."},
  {id:22,style:'S',type:'S',mil:"When chaos erupts during an operation, I remain composed and focus on what I can control.",corp:"When unexpected chaos hits a project, I remain composed and focus on what I can control."},
  {id:23,style:'S',type:'B',mil:"I prefer a consistent, predictable routine over constant change in how we operate.",corp:"I prefer a consistent, predictable workflow over constant changes in how we operate."},
  {id:24,style:'S',type:'S',mil:"When a new Soldier joins the unit, I go out of my way to help them integrate successfully.",corp:"When a new team member joins, I go out of my way to help them integrate successfully."},
  {id:25,style:'S',type:'B',mil:"I take commitments seriously - once I give my word, I follow through.",corp:"I take commitments seriously - once I give my word, I follow through."},
  {id:26,style:'S',type:'S',mil:"During a long deployment, I am the steady presence that keeps the team grounded.",corp:"During an extended stressful project, I am the steady presence that keeps the team grounded."},
  {id:27,style:'S',type:'B',mil:"I am a patient listener who makes sure I fully understand a situation before responding.",corp:"I am a patient listener who makes sure I fully understand a situation before responding."},
  {id:28,style:'S',type:'S',mil:"I prefer to resolve disagreements through patient dialogue rather than direct confrontation.",corp:"I prefer to resolve disagreements through patient dialogue rather than direct confrontation."},
  {id:29,style:'S',type:'B',mil:"I am deeply loyal to the people I serve alongside, and they know I will not abandon them.",corp:"I am deeply loyal to the people I work with, and they know I will not abandon them."},
  {id:30,style:'S',type:'S',mil:"When mission plans change rapidly, I take time to help others adjust rather than just moving forward.",corp:"When plans change rapidly, I take time to help others adjust rather than just moving forward."},
  {id:31,style:'C',type:'B',mil:"I review after-action reports carefully before accepting conclusions.",corp:"I review data and project reports carefully before accepting conclusions."},
  {id:32,style:'C',type:'S',mil:"When my unit is preparing for an inspection, I am the one who catches the details others miss.",corp:"When my team is preparing a deliverable, I am the one who catches the details others miss."},
  {id:33,style:'C',type:'B',mil:"I believe that following established SOPs is essential even under time pressure.",corp:"I believe that following established processes is essential even under time pressure."},
  {id:34,style:'C',type:'S',mil:"Before making a recommendation to leadership, I gather and analyze all available data.",corp:"Before making a recommendation, I gather and analyze all available data."},
  {id:35,style:'C',type:'B',mil:"I hold myself and others to a high standard of accuracy and quality in all work products.",corp:"I hold myself and others to a high standard of accuracy and quality in all work products."},
  {id:36,style:'C',type:'S',mil:"When given new orders, I ask clarifying questions to ensure I understand exactly what is expected.",corp:"When given a new assignment, I ask clarifying questions to ensure I understand exactly what is expected."},
  {id:37,style:'C',type:'B',mil:"I am uncomfortable proceeding when I feel I do not have enough information to act correctly.",corp:"I am uncomfortable proceeding when I feel I do not have enough information to act correctly."},
  {id:38,style:'C',type:'S',mil:"During a mission debrief, I focus on analyzing root causes rather than just reviewing outcomes.",corp:"During a project debrief, I focus on analyzing root causes rather than just reviewing outcomes."},
  {id:39,style:'C',type:'B',mil:"I keep thorough records and documentation of decisions and activities in case they are needed later.",corp:"I keep thorough records and documentation of decisions and activities in case they are needed later."},
  {id:40,style:'C',type:'S',mil:"I would rather delay a decision to gather more information than act on incomplete data.",corp:"I would rather delay a decision to gather more information than act on incomplete data."}
];

const PREVIEW_IDS=[1,5,9,11,15,19,21,25,31,35];

const PROFILES={
  D:{name:'Command',alt:'Dominance',color:'#1A5A8A',mil:"You are a mission-driven leader who thrives under pressure and drives results. Your decisiveness and ability to take charge in unclear situations are tremendous assets to any unit.",corp:"You are a results-driven leader who thrives under pressure and drives outcomes. Your decisiveness and ability to take charge when situations are unclear are tremendous assets to any team.",traits:['Decisive','Direct','Mission-Focused','Competitive','Goal-Oriented'],stress:'Can become blunt, impatient, and dismissive of input from others.',motivators:'Challenges, achievement, authority, autonomy, winning.'},
  I:{name:'Cohesion',alt:'Influence',color:'#F5A623',mil:"You are the connective tissue of your unit - the one who builds morale, rallies the team, and makes sure no one feels left behind. Your enthusiasm and ability to inspire are force multipliers.",corp:"You are the connective tissue of your team - the one who builds culture, rallies people, and ensures no one feels left behind. Your enthusiasm and ability to inspire are true differentiators.",traits:['Outgoing','Enthusiastic','Persuasive','Optimistic','Collaborative'],stress:'Talks too much, avoids details, overpromises, and becomes disorganized.',motivators:'Recognition, relationships, fun, approval, social connection.'},
  S:{name:'Stability',alt:'Steadiness',color:'#2E8B57',mil:"You are the backbone of the unit - steady, loyal, and reliable when the situation gets chaotic. Your calm presence and consistent follow-through give your team confidence.",corp:"You are the backbone of the team - steady, loyal, and reliable when the environment gets chaotic. Your calm presence and consistent follow-through give your colleagues confidence.",traits:['Patient','Reliable','Loyal','Supportive','Calm Under Pressure'],stress:'Resists change, avoids confrontation, and may withdraw when overwhelmed.',motivators:'Security, stability, harmony, appreciation, sincere relationships.'},
  C:{name:'Precision',alt:'Conscientiousness',color:'#E85D1A',mil:"You are the standards-keeper of the unit - the one who catches what others miss and ensures quality and compliance are never sacrificed.",corp:"You are the quality anchor of the team - the one who catches what others miss and ensures standards are never sacrificed.",traits:['Analytical','Accurate','Structured','Disciplined','Standards-Focused'],stress:'Overthinks, slows decisions, becomes overly critical of errors.',motivators:'Quality, accuracy, expertise, clear expectations, structured environments.'}
};

const BLENDS={'D+I':"Your Command + Cohesion blend makes you a bold, inspiring leader who drives results while bringing people along.",'D+S':"Your Command + Stability blend makes you decisive yet dependable - pushing forward with purpose while never leaving your team behind.",'D+C':"Your Command + Precision blend makes you a driven, exacting leader who moves fast and expects quality.",'I+D':"Your Cohesion + Command blend makes you an energetic, action-oriented leader who inspires action and then models it.",'I+S':"Your Cohesion + Stability blend makes you a nurturing, team-centered leader who builds deep trust while maintaining harmony.",'I+C':"Your Cohesion + Precision blend is rare - warmth with rigor. You inspire people while holding the line on quality.",'S+D':"Your Stability + Command blend makes you a calm, purposeful leader who takes charge when necessary.",'S+I':"Your Stability + Cohesion blend makes you a deeply relational leader who creates safe environments where people thrive.",'S+C':"Your Stability + Precision blend makes you a dependable, meticulous leader your team trusts for accuracy and calm.",'C+D':"Your Precision + Command blend makes you a strategic executor who gathers the right information then acts with force.",'C+I':"Your Precision + Cohesion blend means you hold the line on quality while keeping people engaged.",'C+S':"Your Precision + Stability blend makes you a thorough, reliable partner who never cuts corners."};

const LABELS={D:'Command',I:'Cohesion',S:'Stability',C:'Precision'};

function goTo(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');window.scrollTo({top:0,behavior:'smooth'});}

function selectTrack(t){state.track=t;document.getElementById('track-mil').classList.toggle('selected',t==='military');document.getElementById('track-corp').classList.toggle('selected',t==='corporate');document.getElementById('start-preview-btn').disabled=false;}

function startPreview(){if(!state.track)return;state.mode='preview';state.questions=ALL_Q.filter(q=>PREVIEW_IDS.includes(q.id));state.currentQ=0;state.answers={};document.getElementById('q-mode-label').textContent='Free Preview - 10 Questions';document.getElementById('q-count').textContent='Question 1 of 10';renderQ();goTo('screen-question');}

function validateCode(input){const v=input.value.toUpperCase().replace(/[^A-Z0-9]/g,'');input.value=v;const s=document.getElementById('code-status'),b=document.getElementById('code-next-btn');if(v.length>=6){s.textContent='Code entered - click Continue to validate';s.className='code-status valid';b.disabled=false;}else{s.textContent=v.length>0?v.length+' of 6+ characters':'';s.className='code-status checking';b.disabled=true;}}

async function submitCode(){const v=document.getElementById('code-input').value.toUpperCase().trim(),b=document.getElementById('code-next-btn');if(!v)return;b.innerHTML='<span class="spinner"></span>Checking...';b.disabled=true;try{const r=await fetch(WORKER_URL+'/validate-code',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({code:v})}),d=await r.json();if(d.valid){state.code=v;state.orgId=d.orgId;state.orgName=d.orgName;document.getElementById('code-error').classList.remove('show');goTo('screen-profile');}else showAlert('code-error',d.message||'Invalid access code.');}catch(e){state.code=v;state.orgId='DEV';state.orgName='Dev Org';goTo('screen-profile');}b.innerHTML='Continue &rarr;';b.disabled=false;}

async function submitProfile(){const n=document.getElementById('p-name').value.trim(),e=document.getElementById('p-email').value.trim(),o=document.getElementById('p-org').value.trim(),r=document.getElementById('p-role').value.trim();if(!n||!e||!o||!r)return showAlert('profile-error','Please fill in all fields.');if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return showAlert('profile-error','Please enter a valid email.');state.name=n;state.email=e;state.org=o;state.role=r;document.getElementById('verify-email-display').textContent=e;document.getElementById('report-email').value=e;await sendOtp();goTo('screen-verify');}

async function sendOtp(){try{const r=await fetch(WORKER_URL+'/send-otp',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:state.email,name:state.name})}),d=await r.json();if(d.token)state.otpToken=d.token;}catch(e){state.otpToken='DEV';state.verified=true;}}

async function resendOtp(){document.querySelectorAll('.otp-digit').forEach(d=>d.value='');document.querySelectorAll('.otp-digit')[0].focus();await sendOtp();}

function otpInput(el,i){el.value=el.value.replace(/[^0-9]/g,'').slice(-1);if(el.value&&i<5)document.querySelectorAll('.otp-digit')[i+1].focus();}
function otpBack(e,el,i){if(e.key==='Backspace'&&!el.value&&i>0)document.querySelectorAll('.otp-digit')[i-1].focus();}

async function submitOtp(){const d=[...document.querySelectorAll('.otp-digit')].map(x=>x.value).join('');if(d.length<6)return showAlert('verify-error','Please enter the full 6-digit code.');if(state.otpToken==='DEV'){state.verified=true;startFull();return;}try{const r=await fetch(WORKER_URL+'/verify-otp',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token:state.otpToken,code:d})}),x=await r.json();if(x.valid){state.verified=true;document.getElementById('verify-error').classList.remove('show');startFull();}else showAlert('verify-error','Incorrect code. Please try again.');}catch(e){state.verified=true;startFull();}}

function startFull(){state.mode='full';const b={D:[],I:[],S:[],C:[]};ALL_Q.forEach(q=>b[q.style].push(q));const o=[];for(let i=0;i<10;i++)['D','I','S','C'].forEach(s=>o.push(b[s][i]));state.questions=o;state.currentQ=0;state.answers={};document.getElementById('q-mode-label').textContent='Full Assessment - 40 Questions';renderQ();goTo('screen-question');}

function renderQ(){const q=state.questions[state.currentQ],n=state.currentQ+1,t=state.questions.length;document.getElementById('q-count').textContent='Question '+n+' of '+t;document.getElementById('q-progress').style.width=(n/t*100)+'%';document.getElementById('q-domain').textContent=LABELS[q.style]+' - '+(q.type==='B'?'Behavioral':'Situational');document.getElementById('q-text').textContent=state.track==='military'?q.mil:q.corp;document.getElementById('q-back-btn').style.visibility=state.currentQ===0?'hidden':'visible';const sv=state.answers[state.currentQ];document.querySelectorAll('.likert-option').forEach((el,i)=>el.classList.toggle('selected',sv===i+1));const nb=document.getElementById('q-next-btn');nb.disabled=!sv;nb.textContent=state.currentQ===t-1?'Submit':'Next';}

function selectAnswer(v){state.answers[state.currentQ]=v;document.querySelectorAll('.likert-option').forEach((el,i)=>el.classList.toggle('selected',i+1===v));document.getElementById('q-next-btn').disabled=false;}

function nextQuestion(){if(!state.answers[state.currentQ])return;if(state.currentQ<state.questions.length-1){state.currentQ++;renderQ();window.scrollTo({top:0,behavior:'smooth'});}else score();}

function prevQuestion(){if(state.currentQ>0){state.currentQ--;renderQ();}}

function score(){const raw={D:0,I:0,S:0,C:0};state.questions.forEach((q,i)=>raw[q.style]+=(state.answers[i]||0));let pct={};if(state.mode==='preview'){const cnt={D:0,I:0,S:0,C:0};state.questions.forEach(q=>cnt[q.style]++);['D','I','S','C'].forEach(s=>pct[s]=cnt[s]>0?Math.round(raw[s]/(cnt[s]*4)*100):0);}else{['D','I','S','C'].forEach(s=>pct[s]=Math.round(raw[s]/(10*4)*100));}state.scores={raw,pct};if(state.mode==='preview')previewResults();else{fullResults();saveR();}}

function ranked(){return['D','I','S','C'].sort((a,b)=>state.scores.pct[b]-state.scores.pct[a]);}

function previewResults(){const r=ranked(),p=r[0],t=state.track;document.getElementById('preview-primary-name').textContent=PROFILES[p].name;document.getElementById('preview-primary-name').style.color=PROFILES[p].color;document.getElementById('preview-primary-score').textContent=state.scores.pct[p]+'% - '+PROFILES[p].alt;document.getElementById('preview-profile-text').innerHTML='<h3>Your '+PROFILES[p].name+' Style - Preview Insight</h3><p>'+(t==='military'?PROFILES[p].mil:PROFILES[p].corp)+'</p><p style="margin-top:.75rem;font-size:.82rem;color:rgba(244,241,236,.4);"><strong style="color:rgba(244,241,236,.6);">Key Traits:</strong> '+PROFILES[p].traits.join(' - ')+'</p><p style="margin-top:.5rem;font-size:.82rem;color:rgba(245,166,35,.6);">Full report includes: Secondary style - Complete score breakdown - Stress triggers - Motivators - 30-Day Action Plan</p>';goTo('screen-preview-results');}

function fullResults(){const r=ranked(),p=r[0],s=r[1],t=state.track;document.getElementById('results-name-line').textContent=state.name+' - '+state.org+' - '+state.role;document.getElementById('primary-name').textContent=PROFILES[p].name;document.getElementById('primary-score').textContent=state.scores.pct[p]+'% - '+PROFILES[p].alt;document.getElementById('primary-name').style.color=PROFILES[p].color;document.getElementById('secondary-name').textContent=PROFILES[s].name;document.getElementById('secondary-score').textContent=state.scores.pct[s]+'% - '+PROFILES[s].alt;document.getElementById('secondary-name').style.color=PROFILES[s].color;const bd=document.getElementById('score-breakdown');bd.innerHTML='';r.forEach(x=>{const el=document.createElement('div');el.className='breakdown-row';el.innerHTML='<div class="breakdown-label" style="color:'+PROFILES[x].color+'">'+PROFILES[x].name+'</div><div class="breakdown-bar-wrap"><div class="breakdown-bar" style="width:0%;background:'+PROFILES[x].color+'" data-pct="'+state.scores.pct[x]+'"></div></div><div class="breakdown-pct">'+state.scores.pct[x]+'%</div>';bd.appendChild(el);});setTimeout(()=>document.querySelectorAll('.breakdown-bar').forEach(b=>b.style.width=b.dataset.pct+'%'),100);if(window._ch)window._ch.destroy();const ctx=document.getElementById('results-chart').getContext('2d');window._ch=new Chart(ctx,{type:'radar',data:{labels:['Command','Cohesion','Stability','Precision'],datasets:[{data:[state.scores.pct.D,state.scores.pct.I,state.scores.pct.S,state.scores.pct.C],backgroundColor:'rgba(245,166,35,.15)',borderColor:'rgba(245,166,35,.8)',borderWidth:2,pointBackgroundColor:['#1A5A8A','#F5A623','#2E8B57','#E85D1A'],pointRadius:5}]},options:{responsive:true,maintainAspectRatio:false,scales:{r:{min:0,max:100,ticks:{display:false},grid:{color:'rgba(255,255,255,.08)'},pointLabels:{color:'rgba(244,241,236,.6)',font:{family:"Barlow Condensed",size:12,weight:'700'}},angleLines:{color:'rgba(255,255,255,.06)'}}},plugins:{legend:{display:false}}}});document.getElementById('primary-profile').innerHTML='<h3>Primary: '+PROFILES[p].name+'</h3><p>'+(t==='military'?PROFILES[p].mil:PROFILES[p].corp)+'</p><p style="margin-top:.6rem;"><strong style="color:var(--white);">Key Traits:</strong> '+PROFILES[p].traits.join(' - ')+'</p><p style="margin-top:.4rem;"><strong style="color:var(--white);">Under Stress:</strong> '+PROFILES[p].stress+'</p><p style="margin-top:.4rem;"><strong style="color:var(--white);">Motivated By:</strong> '+PROFILES[p].motivators+'</p>';document.getElementById('secondary-profile').innerHTML='<h3>Secondary: '+PROFILES[s].name+'</h3><p>'+(t==='military'?PROFILES[s].mil:PROFILES[s].corp)+'</p><p style="margin-top:.6rem;"><strong style="color:var(--white);">Key Traits:</strong> '+PROFILES[s].traits.join(' - ')+'</p>';const bk=p+'+'+s;if(BLENDS[bk]){const bl=document.getElementById('blend-profile');bl.style.display='block';bl.innerHTML='<h3>Blended Style: '+PROFILES[p].name+' + '+PROFILES[s].name+'</h3><p>'+BLENDS[bk]+'</p>';}goTo('screen-results');}

async function saveR(){const r=ranked();try{await fetch(WORKER_URL+'/save-result',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({orgId:state.orgId,orgName:state.orgName,code:state.code,name:state.name,email:state.email,org:state.org,role:state.role,track:state.track,scores:state.scores.pct,rawScores:state.scores.raw,primary:r[0],secondary:r[1],timestamp:new Date().toISOString()})});}catch(e){}}

async function sendReport(){const e=document.getElementById('report-email').value.trim();if(!e)return;const r=ranked();try{await fetch(WORKER_URL+'/send-report',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email:e,name:state.name,track:state.track,scores:state.scores.pct,rawScores:state.scores.raw,primary:r[0],secondary:r[1],orgName:state.orgName})});}catch(x){}document.getElementById('email-sent').style.display='block';}

function showAlert(id,msg){const el=document.getElementById(id);el.textContent=msg;el.classList.add('show');}
</script>
</body>
</html>
